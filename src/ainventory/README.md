# AInventory Backend API

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π FastAPI backend –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø—Ä–æ—Å–∞.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Excel (.xlsx, .xls) –∏ CSV —Ñ–∞–π–ª–æ–≤
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º**: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤, —Å–∫–ª–∞–¥–æ–≤, –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- **–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–æ—Å–∞**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prophet –¥–ª—è ML-–ø—Ä–æ–≥–Ω–æ–∑–æ–≤
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—é –∏ –ø—Ä–æ–≥–Ω–æ–∑–∞–º
- **RESTful API**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π REST API —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/ainventory/
‚îú‚îÄ‚îÄ api/                    # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ main.py            # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ routers/           # API —Ä–æ—É—Ç–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data.py        # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inventory.py   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forecasts.py   # –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analytics.py   # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ schemas.py         # Pydantic —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ database/              # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ connection.py      # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ init_db.py         # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ services/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ file_processor.py  # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ forecasting/           # –ú–æ–¥–µ–ª–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ prophet_model.py   # Prophet –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

## üóÑÔ∏è –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:
- **Warehouse** - –°–∫–ª–∞–¥—ã
- **Category** - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- **Brand** - –ë—Ä–µ–Ω–¥—ã
- **Product** - –ü—Ä–æ–¥—É–∫—Ç—ã
- **InventoryItem** - –û—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö
- **Sale** - –ü—Ä–æ–¥–∞–∂–∏
- **Forecast** - –ü—Ä–æ–≥–Ω–æ–∑—ã —Å–ø—Ä–æ—Å–∞
- **DataUpload** - –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

## üîå API Endpoints

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (`/api/v1/data/`)

#### POST `/upload`
–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `file`, `file_type`, `warehouse_id`, `category_id`
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã**: `products`, `inventory`, `sales`
- **–§–æ—Ä–º–∞—Ç—ã**: Excel (.xlsx, .xls), CSV

#### GET `/uploads`
–°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- **–§–∏–ª—å—Ç—Ä—ã**: `status`, `limit`, `offset`

#### GET `/templates`
–®–∞–±–ª–æ–Ω—ã —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏

### 2. –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (`/api/v1/inventory/`)

#### GET `/`
–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- **–§–∏–ª—å—Ç—Ä—ã**: `search`, `warehouse_id`, `category_id`, `brand_id`, `low_stock`, `out_of_stock`
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è**: `page`, `limit`

#### POST `/`
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è

#### PUT `/{item_id}`
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è

#### DELETE `/{item_id}`
–£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è

#### POST `/{item_id}/adjust`
–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –æ—Å—Ç–∞—Ç–∫–∞ —Ç–æ–≤–∞—Ä–∞

#### GET `/analytics/overview`
–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—é

### 3. –ü—Ä–æ–≥–Ω–æ–∑—ã (`/api/v1/forecasts/`)

#### GET `/`
–°–ø–∏—Å–æ–∫ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- **–§–∏–ª—å—Ç—Ä—ã**: `product_id`, `warehouse_id`, `model_name`, `start_date`, `end_date`

#### POST `/generate`
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `product_id`, `warehouse_id`, `forecast_horizon`, `model_name`

#### GET `/analytics/overview`
–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø—Ä–æ–≥–Ω–æ–∑–∞–º

#### GET `/accuracy/evaluate`
–û—Ü–µ–Ω–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤

### 4. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (`/api/v1/analytics/`)

#### GET `/sales/overview`
–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º
- **–§–∏–ª—å—Ç—Ä—ã**: `start_date`, `end_date`, `warehouse_id`, `category_id`

#### GET `/sales/trends`
–¢—Ä–µ–Ω–¥—ã –ø—Ä–æ–¥–∞–∂ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `period`, `start_date`, `end_date`, `warehouse_id`

#### GET `/inventory/overview`
–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—é

#### GET `/dashboard/summary`
–°–≤–æ–¥–∫–∞ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞

#### GET `/reports/inventory-status`
–û—Ç—á–µ—Ç –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è

#### GET `/reports/sales-performance`
–û—Ç—á–µ—Ç –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥–∞–∂

## üìä –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–¥—É–∫—Ç—ã (products)
```csv
sku,name,description,category,brand,unit_cost,unit_price,weight,dimensions
PROD001,–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞,–û–ø–∏—Å–∞–Ω–∏–µ,–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞,Generic,100.0,150.0,0.5,10x5x2 —Å–º
```

### –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (inventory)
```csv
sku,current_stock,min_stock,max_stock,reorder_point,safety_stock,lead_time_days
PROD001,50.0,10.0,100.0,15.0,5.0,7
```

### –ü—Ä–æ–¥–∞–∂–∏ (sales)
```csv
sku,sale_date,quantity,revenue,cost,customer_id,transaction_id
PROD001,2024-01-15,5.0,750.0,500.0,CUST001,TXN001
```

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –°–æ–∑–¥–∞–π—Ç–µ PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
createdb ainventory

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ env.example –≤ .env –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ DATABASE_URL
cp env.example .env
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
python -m src.ainventory.api.main

# –ò–ª–∏ —Å uvicorn
uvicorn src.ainventory.api.main:app --reload --host 0.0.0.0 --port 8000
```

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config.py`:

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: URL, –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **API**: —Ö–æ—Å—Ç, –ø–æ—Ä—Ç, CORS
- **–§–∞–π–ª—ã**: –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä, –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∑–æ–∫
- **–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Prophet
- **–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å**: –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ —Å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
```bash
curl -X POST "http://localhost:8000/api/v1/data/upload" \
  -H "accept: application/json" \
  -H "Content-Type: multipart/form-data" \
  -F "file=@products.xlsx" \
  -F "file_type=products"
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º
```bash
curl "http://localhost:8000/api/v1/analytics/sales/overview?start_date=2024-01-01&end_date=2024-01-31"
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞
```bash
curl -X POST "http://localhost:8000/api/v1/forecasts/generate?product_id=1&warehouse_id=1&forecast_horizon=30"
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pytest tests/

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=src/ainventory tests/
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
- –ü—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö endpoints
1. –°–æ–∑–¥–∞–π—Ç–µ —Ä–æ—É—Ç–µ—Ä –≤ `api/routers/`
2. –î–æ–±–∞–≤—å—Ç–µ —Å—Ö–µ–º—ã –≤ `schemas.py`
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–æ—É—Ç–µ—Ä –≤ `main.py`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π
1. –°–æ–∑–¥–∞–π—Ç–µ –º–æ–¥–µ–ª—å –≤ `database/models.py`
2. –î–æ–±–∞–≤—å—Ç–µ —Å—Ö–µ–º—ã –≤ `schemas.py`
3. –û–±–Ω–æ–≤–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [FastAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://fastapi.tiangolo.com/)
- [SQLAlchemy –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.sqlalchemy.org/)
- [Prophet –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://facebook.github.io/prophet/)
- [Pydantic –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://pydantic-docs.helpmanual.io/)
